# DIVERGE: Diversity-Enhanced Retrieval-Augmented Generation

DIVERGE is a plug-and-play, agentic Retrieval-Augmented Generation (RAG) framework
designed to **enhance output diversity for open-ended information-seeking queries**.
Unlike standard RAG systems that are optimized for a single correct answer,
DIVERGE explicitly models and explores **multiple viewpoints** through iterative
retrieval and generation, while maintaining high answer quality.

This repository contains the reference implementation and evaluation code for the
paper **‚ÄúDIVERGE: Diversity-Enhanced Retrieval-Augmented Generation for Open-Ended Questions.‚Äù**

---

## üöÄ Motivation

Existing RAG systems are largely built around a *single-answer assumption* and are
primarily optimized for correctness.
However, many real-world information-seeking queries are **open-ended** and admit
multiple plausible answers.
In such settings, standard RAG often collapses to homogeneous outputs‚Äîeven when
retrieved contexts contain diverse evidence.

Our empirical study shows that **simply increasing retrieval diversity is insufficient**
to induce diverse generations.
DIVERGE addresses this limitation by introducing an agentic, iterative RAG framework
that explicitly tracks and explores underrepresented viewpoints.

---

## üß† Key Ideas

DIVERGE improves diversity through three core mechanisms:

1. **Reflection-Guided Viewpoint Generation**  
   The model reflects on previously generated answers to extract salient viewpoints
   and explicitly proposes new, insufficiently covered viewpoints to guide future
   retrieval and generation.

2. **Diversity-Aware Retrieval**  
   Retrieved documents are reranked by jointly considering:
   - relevance to the current query,
   - diversity with respect to previously retrieved contexts (memory),
   - diversity among candidates selected in the current iteration.

3. **Viewpoint-Conditioned Generation with Memory**  
   Generation is conditioned on both the original query and a target viewpoint,
   while a lightweight memory prevents repetition and supports long-horizon diversity.

Importantly, DIVERGE operates **entirely at the retrieval and prompting level** and
**does not rely on token-level logits or decoding hyperparameters**, making it
compatible with **any frontier or closed-source LLM**.

---

## üß© Framework Overview

DIVERGE follows an iterative loop:

1. Generate an initial RAG answer.
2. Extract viewpoints from existing answers via reflection.
3. Select or propose a new viewpoint.
4. Retrieve new evidence conditioned on the viewpoint.
5. Generate and refine a new answer grounded in the viewpoint.
6. Update memory and repeat.

This process enables DIVERGE to explore a broader space of perspectives without
sacrificing answer quality.


